{% load main_filters %}

<!-- templates/main/_grouped_tables.html -->
<h2>{{ concept1_name }}</h2>
<table class="preview-table">
  <thead>
    <tr><th>Group</th><th>Students</th></tr>
  </thead>
  <tbody>
    {% for group, members in groups1.items %}
      <tr>
        <td>{{ group }}</td>
        <td>
          {% for s in members %}
            {% with score=s.ufli_score_1 %}
              <span class="student">
                {{ s.name }} 
                <span class="score-cell {{ s.ufli_score_1|score_color_class:lesson_1.total_points }}">
                  {{ s.ufli_score_1 }}
                </span>
              </span>{% if not forloop.last %}, {% endif %}
            {% endwith %}
          {% endfor %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<h2>{{ concept2_name }}</h2>
<table class="preview-table">
  <thead>
    <tr><th>Group</th><th>Students</th></tr>
  </thead>
  <tbody>
    {% for group, members in groups2.items %}
      <tr>
        <td>{{ group }}</td>
        <td>
          {% for s in members %}
            {% with score=s.ufli_score_2 %}
              <span class="student">
                {{ s.name }} 
                <span class="score-cell {{ s.ufli_score_2|score_color_class:lesson_2.total_points }}">
                  {{ s.ufli_score_1 }}
                </span>                
              </span>{% if not forloop.last %}, {% endif %}
            {% endwith %}
          {% endfor %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

